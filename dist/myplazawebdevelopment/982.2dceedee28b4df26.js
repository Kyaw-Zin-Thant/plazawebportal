"use strict";(self.webpackChunkmyplazawebdevelopment=self.webpackChunkmyplazawebdevelopment||[]).push([[982],{3982:(O,c,a)=>{a.r(c),a.d(c,{TypeModule:()=>D});var p=a(1048),Z=a(8834),t=a(9724),b=a(2508),A=a(366),x=a(7280);let L=(()=>{class o{constructor(e){this._service=e,this.resultsLength=0,this.displayedColumns=["name","type","action"],this.displayedLabel=["Name","Measure","Action"],this.dataSource=new Z.by(this.type),this.tableAction={isDelete:!0,isEdit:!0}}ngOnInit(){this.getUserList()}getUserList(){this.sub=this._service.getTypeList({sortDirection:"desc",limit:10,page:1,sortColumn:"name"}).subscribe(n=>{console.log(n),this.resultsLength=n.totalCount,this.dataSource.data=n.types})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.m))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-type"]],decls:2,vars:5,consts:[[3,"displayedColumns","displayedLabel","dataSource","resultsLength","tableAction"]],template:function(e,n){1&e&&(t._UZ(0,"app-manage-custom-header"),t._UZ(1,"data-table",0)),2&e&&(t.xp6(1),t.Q6J("displayedColumns",n.displayedColumns)("displayedLabel",n.displayedLabel)("dataSource",n.dataSource)("resultsLength",n.resultsLength)("tableAction",n.tableAction))},directives:[A.C,x.Q],styles:[""]}),o})();var u=a(8413),r=a(1659),U=a(2340),m=a(7969),F=a(9725);let d=(()=>{class o{constructor(e){this.http=e,this.baseUrl=U.N.apiUrl+"/api/v1/"}onSaveType(e,n){console.log(n);let l=this.baseUrl;return l+=n?`type/${n}`:"type",n?this.http.put(l,e).pipe((0,m.U)(s=>s||[])):this.http.post(l,e).pipe((0,m.U)(s=>s||[]))}getDetail(e,n){return this.http.get(this.baseUrl+`${e}/${n}`).pipe((0,m.U)(s=>s||{}))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(F.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var y=a(5395),h=a(5691),f=a(8904),g=a(3472),v=a(7043),M=a(4659);function I(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",14),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().index;return t.oxw().removetype(l)}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA(),t.qZA(),t.BQk()}}function N(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div",11),t.TgZ(2,"mat-form-field",3),t._UZ(3,"input",12),t.TgZ(4,"mat-error"),t._uU(5," Please provide a valid label name "),t.qZA(),t.qZA(),t.YNc(6,I,4,0,"ng-container",13),t.qZA(),t.BQk()),2&o){const e=i.$implicit,n=t.oxw();t.xp6(1),t.Q6J("formGroup",e),t.xp6(5),t.Q6J("ngIf",n.types().controls.length>1)}}let T=(()=>{class o{constructor(e,n,l,s){this.formBuilder=e,this._save=n,this._activeRoute=l,this._loc=s,this.typeForm=this.formBuilder.group({name:["",r.kI.required],label:["",r.kI.required],list:this.formBuilder.array([this.newType()])})}ngOnInit(){var e;this.typeId=this._activeRoute.snapshot.paramMap.get("id");let n=null===(e=this._activeRoute.snapshot.data.detail)||void 0===e?void 0:e.type;n&&this.getDetail(n)}getDetail(e){console.log(e),this.typeForm=this.formBuilder.group({name:[e.name,r.kI.required],label:[e.label,r.kI.required],list:this.formBuilder.array([])}),e.list.map(n=>{this.types().push(this.formBuilder.group({type:[n,r.kI.required]}))})}types(){return this.typeForm.get("list")}newType(){return this.formBuilder.group({type:["",r.kI.required]})}addMainType(){this.types().push(this.newType())}removetype(e){this.types().removeAt(e)}onSave(){if(this.typeForm.valid){let e=this.typeForm.value.list.map(n=>n.type);this.typeForm.value.list=e,console.log(this.typeId),this.sub=this._save.onSaveType(this.typeForm.value,this.typeId).subscribe(n=>{console.log(n),this._loc.back()})}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(d),t.Y36(u.gz),t.Y36(p.Ye))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-type"]],decls:21,vars:2,consts:[[3,"formGroup"],["fxLayout","column","fxLayoutAlign","start center",1,"main-wrapper"],["fxLayout","column","fxLayoutAlign","center center",1,"location-form"],["appearance","outline"],["matInput","","type","text","placeholder","Name","formControlName","name","name","name","required",""],["matInput","","type","text","placeholder","Label Name","formControlName","label","name","labelName","required",""],["fxLayout","row","fxLayoutAlign","space-between center",2,"width","100%","margin-top","14px"],["mat-mini-fab","","aria-label","Add button","color","primary",3,"click"],["formArrayName","list"],[4,"ngFor","ngForOf"],[3,"click"],["fxLayoutAlign","start start",1,"type-wrapper",3,"formGroup"],["matInput","","type","text","placeholder","Label Name","formControlName","type","name","type","required",""],[4,"ngIf"],["mat-icon-button","","color","warn","aria-label","Example icon button with a heart icon",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"mat-form-field",3),t._UZ(4,"input",4),t.TgZ(5,"mat-error"),t._uU(6," Please provide a valid name "),t.qZA(),t.qZA(),t.TgZ(7,"mat-form-field",3),t._UZ(8,"input",5),t.TgZ(9,"mat-error"),t._uU(10," Please provide a valid label name "),t.qZA(),t.qZA(),t.TgZ(11,"div",6),t.TgZ(12,"label"),t._uU(13,"Type"),t.qZA(),t.TgZ(14,"button",7),t.NdJ("click",function(){return n.addMainType()}),t.TgZ(15,"mat-icon"),t._uU(16,"add"),t.qZA(),t.qZA(),t.qZA(),t.ynx(17,8),t.YNc(18,N,7,2,"ng-container",9),t.BQk(),t.TgZ(19,"app-primary-button",10),t.NdJ("click",function(){return n.onSave()}),t._uU(20," Create "),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.typeForm),t.xp6(18),t.Q6J("ngForOf",n.types().controls))},directives:[r._Y,r.JL,r.sg,y.xw,y.Wh,h.KE,f.Nt,r.Fj,r.JJ,r.u,r.Q7,h.TO,g.lW,v.Hw,r.CE,p.sg,p.O5,M.C],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%;margin-right:20px}.main-wrapper[_ngcontent-%COMP%]{height:calc(100vh - 80px);padding:30px 0}.location-form[_ngcontent-%COMP%]{width:600px}.type-wrapper[_ngcontent-%COMP%]{width:100%;margin-top:16px}"]}),o})();var S=a(3249),B=a(5523),J=a(6329);let Y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[B.ie,J.o9,f.c,v.Ps,g.ot]}),o})(),C=(()=>{class o{constructor(e){this._save=e}resolve(e){return this._save.getDetail("type",e.params.id)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(d))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();const w=[{path:"",component:L},{path:"create",component:T},{path:"create/:id",component:T,resolve:{detail:C}}];let D=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[C],imports:[[p.ez,u.Bz.forChild(w),S.C,r.u5,r.UX,Y]]}),o})()}}]);